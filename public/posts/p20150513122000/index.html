<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  



  
  


<head lang="en-us">
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light">
  <meta name="description" content="上一节里，我们搭建了一个数据库的结构，并用index验证了request-response cycle，如下图：


1. Add show method into Controller
这一节，我们要继续丰富我们的controller:
While index gave all categories, show allows us to access one category. This this is helpful when we want to show just one Category at a time in our Etsy app.
The show method works like this. we write:


[ruby] 
view plaincopy


def&nbsp;show&nbsp;&nbsp;&nbsp;&nbsp;@category&nbsp;=&nbsp;Category.find(params[:id]) &nbsp;&nbsp; #it&#39;s a hash that we use to find an object by its unique id
end&nbsp; 



The show method finds a single category of a given id and stores it in @category. Look a little closer at params[:id]. Seem familiar?
It&#39;s a hash that we use to find an object by its unique id. We can find the exact object we want.
我们知道，【在main Controller里的每个action都需要一个route &amp; view】
这里我们在controller里加入了show method，Rails自动update了the route and the view for us.

提醒：在route.rb文件中，我们已有的语句：resources :categories已经takes care of our route for show. Rails 还创建了show.html.erb在我们的Views中!
Rails did this for show, just like it did for the index method.

Rails generates these when we enter methods in your rails generate controller command[rails generate controller Categories index show new edit delete], other we need do it manually.

此时我们的routes.rb还是老样子：" />
  <meta name="author" content="Hugo Author">
  <meta name="keywords" content="">
  <title>Ruby学习笔记5: 动态web app的建立 （2） | Combine Art and Sciences</title>
  <link rel="canonical" href="http://localhost:1313/posts/p20150513122000/" />
  

  
  <meta property="og:type" content="article" />
  <meta property="og:description" content="上一节里，我们搭建了一个数据库的结构，并用index验证了request-response cycle，如下图：


1. Add show method into Controller
这一节，我们要继续丰富我们的controller:
While index gave all categories, show allows us to access one category. This this is helpful when we want to show just one Category at a time in our Etsy app.
The show method works like this. we write:


[ruby] 
view plaincopy


def&nbsp;show&nbsp;&nbsp;&nbsp;&nbsp;@category&nbsp;=&nbsp;Category.find(params[:id]) &nbsp;&nbsp; #it&#39;s a hash that we use to find an object by its unique id
end&nbsp; 



The show method finds a single category of a given id and stores it in @category. Look a little closer at params[:id]. Seem familiar?
It&#39;s a hash that we use to find an object by its unique id. We can find the exact object we want.
我们知道，【在main Controller里的每个action都需要一个route &amp; view】
这里我们在controller里加入了show method，Rails自动update了the route and the view for us.

提醒：在route.rb文件中，我们已有的语句：resources :categories已经takes care of our route for show. Rails 还创建了show.html.erb在我们的Views中!
Rails did this for show, just like it did for the index method.

Rails generates these when we enter methods in your rails generate controller command[rails generate controller Categories index show new edit delete], other we need do it manually.

此时我们的routes.rb还是老样子：" />
  <meta property="og:title" content="Ruby学习笔记5: 动态web app的建立 （2）" />
  <meta property="og:site_name" content="Combine Art and Sciences" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:url" content="http://localhost:1313/posts/p20150513122000/" />
  <meta property="og:locale" content="en-us" />

  
    <meta property="article:published_time" content="2015-05-13" />
    <meta property="article:modified_time" content="2015-05-13" />
    
  

  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Ruby学习笔记5: 动态web app的建立 （2） | Combine Art and Sciences" />
  <meta name="twitter:description" content="上一节里，我们搭建了一个数据库的结构，并用index验证了request-response cycle，如下图：


1. Add show method into Controller
这一节，我们要继续丰富我们的controller:
While index gave all categories, show allows us to access one category. This this is helpful when we want to show just one Category at a time in our Etsy app.
The show method works like this. we write:


[ruby] 
view plaincopy


def&nbsp;show&nbsp;&nbsp;&nbsp;&nbsp;@category&nbsp;=&nbsp;Category.find(params[:id]) &nbsp;&nbsp; #it&#39;s a hash that we use to find an object by its unique id
end&nbsp; 



The show method finds a single category of a given id and stores it in @category. Look a little closer at params[:id]. Seem familiar?
It&#39;s a hash that we use to find an object by its unique id. We can find the exact object we want.
我们知道，【在main Controller里的每个action都需要一个route &amp; view】
这里我们在controller里加入了show method，Rails自动update了the route and the view for us.

提醒：在route.rb文件中，我们已有的语句：resources :categories已经takes care of our route for show. Rails 还创建了show.html.erb在我们的Views中!
Rails did this for show, just like it did for the index method.

Rails generates these when we enter methods in your rails generate controller command[rails generate controller Categories index show new edit delete], other we need do it manually.

此时我们的routes.rb还是老样子：" />
  <meta name="twitter:domain" content="http://localhost:1313/posts/p20150513122000/" />

  
  
    <link rel="icon" href="http://localhost:1313/favicon.ico">
  
  
  
  

  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/modern-normalize/modern-normalize.min.css">

  
  
  

  

  
    <link rel="stylesheet" href="http://localhost:1313/style.css" rel="preload stylesheet" as="style"/>
  

  
  
</head>

</head>
<body>
  <header>
    <header id="header">
  <div class="row">
    <div class="container has-padding nav">
      <button id="navbar-toggler" class="navbar-button" aria-hidden="true">











<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>





</button>
      <div class="navbar-brand">
        <a class="logo navbar-button" href="http://localhost:1313/" title="Combine Art and Sciences">
          <span>Combine Art and Sciences</span>
        </a>
      </div>
      <nav class="navbar" role="navigation">
        <ul>
          
          
            <li class="nav-bar-item active">
              <a class="nav-link navbar-button" href="/posts/" title="posts">
                <span>posts</span>
              </a>
            </li>
          
            <li class="nav-bar-item">
              <a class="nav-link navbar-button" href="/tags/" title="tags">
                <span>tags</span>
              </a>
            </li>
          
            <li class="nav-bar-item">
              <a class="nav-link navbar-button" href="/archives/" title="archives">
                <span>archives</span>
              </a>
            </li>
          
            <li class="nav-bar-item">
              <a class="nav-link navbar-button" href="/about/" title="about">
                <span>about</span>
              </a>
            </li>
          
        </ul>
      </nav>
      <div class="theme-selector">
        <button class="button is-text" id="theme-selector-button" title="toggle theme">
          <span class="label icon">





<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 32C132.29 32 32 132.29 32 256s100.29 224 224 224 224-100.29 224-224S379.71 32 256 32zM128.72 383.28A180 180 0 01256 76v360a178.82 178.82 0 01-127.28-52.72z'/></svg>











</span>
        </button>
      </div>
    </div>
    
      <div class="container has-padding">
        <div class="breadcrumb">
          
<ol  class="breadcrumb-nav">
  

  

  

<li >
  <a href="http://localhost:1313/">Home</a>
</li>


<li >
  <a href="http://localhost:1313/posts/">Posts</a>
</li>


<li class="active">
  <a href="http://localhost:1313/posts/p20150513122000/">Ruby学习笔记5: 动态web app的建立 （2）</a>
</li>

</ol>




        </div>
      </div>
    
  </div>
</header>

  </header>
  <main>
    

<main id="main">
  <div class="container has-padding">
    <div class="article-card post single">
      <h1 class="title">Ruby学习笔记5: 动态web app的建立 （2）</h1>
      <div class="post-info">
        <span>



<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M32 456a24 24 0 0024 24h400a24 24 0 0024-24V176H32zm320-244a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm-80-80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm-80-80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm-80-80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zM456 64h-55.92V32h-48v32H159.92V32h-48v32H56a23.8 23.8 0 00-24 23.77V144h448V87.77A23.8 23.8 0 00456 64z'/></svg>













<time datetime=2015-05-13T12:20:00&#43;0800 class="date">May 13, 2015</time></span>
        <span>
















<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.13 48 48 141.13 48 256c0 114.69 93.32 208 208 208 114.86 0 208-93.14 208-208 0-114.69-93.31-208-208-208zm108 240H244a4 4 0 01-4-4V116a4 4 0 014-4h24a4 4 0 014 4v140h92a4 4 0 014 4v24a4 4 0 01-4 4z'/></svg>
6 mins to read</span>
        
          <span>












<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 256a112 112 0 10-112-112 112 112 0 00112 112zm0 32c-69.42 0-208 42.88-208 128v64h416v-64c0-85.12-138.58-128-208-128z'/></svg>




Hugo Author</span>
        
        
        
          <span>posts </span>
        
      </div>
      <article class="post-entry content">
        
          <p>上一节里，我们搭建了一个数据库的结构，并用index验证了request-response cycle，如下图：<br>
<img src="http://img.blog.csdn.net/20150513202345080?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br>
</p>
<h3>1. Add show method into Controller</h3>
<p>这一节，我们要继续丰富我们的controller:<br>
While index gave all categories, show allows us to access one category. This this is helpful when we want to show just one Category at a time in our Etsy app.</p>
<p>The show method works like this. we write:</p>
<div class="dp-highlighter bg_ruby">
<div class="bar">
<div class="tools"><strong>[ruby]</strong> <a target="_blank" target="_blank" href="http://blog.csdn.net/sonictl/article/details/45568803#" class="ViewSource" title="view plain">
view plain</a><a target="_blank" target="_blank" href="http://blog.csdn.net/sonictl/article/details/45568803#" class="CopyToClipboard" title="copy">copy</a><a target="_blank" target="_blank" href="https://code.csdn.net/snippets/661983" title="在CODE上查看代码片" style="text-indent:0"><img src="https://code.csdn.net/assets/CODE_ico.png" alt="在CODE上查看代码片" height="12" width="12" style="position:relative; top:1px; left:2px"></a><a target="_blank" target="_blank" href="https://code.csdn.net/snippets/661983/fork" title="派生到我的代码片" style="text-indent:0"><img src="https://code.csdn.net/assets/ico_fork.svg" alt="派生到我的代码片" height="12" width="12" style="position:relative; top:2px; left:2px"></a></div>
</div>
<ol class="dp-rb" start="1">
<li class="alt"><span><span class="keyword">def</span><span>&nbsp;show&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;<span class="variable">@category</span><span>&nbsp;=&nbsp;Category.find(params[</span><span class="symbol">:id</span><span>]) &nbsp;&nbsp; #it's a hash that we use to find an object by its unique id<br>
</span></span></li><li class="alt"><span><span class="keyword">end</span><span>&nbsp; <br>
</span></span></li></ol>
</div>
<p></p>
<p>The show method finds a single category of a given id and stores it in @category. Look a little closer at params[:id]. Seem familiar?<br>
It's a hash that we use to find an object by its unique id. We can find the exact object we want.<br>
我们知道，【在main Controller里的每个action都需要一个route &amp; view】<br>
这里我们在controller里加入了show method，Rails自动update了the route and the view for us.<br>
<br>
提醒：在route.rb文件中，我们已有的语句：resources :categories已经takes care of our route for show. Rails 还创建了show.html.erb在我们的Views中!<br>
Rails did this for show, just like it did for the index method.<br>
<br>
Rails generates these when we enter methods in your rails generate controller command[rails generate controller Categories index show new edit delete], other we need do it manually.<br>
<br>
此时我们的routes.rb还是老样子：</p>
<pre code_snippet_id="666275" snippet_file_name="blog_20150514_1_3355106"  code_snippet_id="666275" snippet_file_name="blog_20150514_1_3355106" name="code" class="ruby">Rails.application.routes.draw do
  get &#39;/&#39; =&gt; &#39;pages#home&#39;
<p>resources :categories
get 'categories/:id/delete' =&gt; 'categories#delete', :as =&gt; :categories_delete
end</pre>**show.html.erb:<pre code_snippet_id="666275" snippet_file_name="blog_20150514_2_3327014"  code_snippet_id="666275" snippet_file_name="blog_20150514_2_3327014" name="code" class="html">&lt;%= render 'shared/topnav' %&gt;
&lt;p&gt;
  &lt;strong&gt;Name:&lt;/strong&gt;
  &lt;%= @category.name %&gt;
&lt;/p&gt;</p>
<p>&lt;p&gt;
  &lt;strong&gt;Thumburl:&lt;/strong&gt;
  &lt;%= image_tag @category.thumburl %&gt;
&lt;/p&gt;</p>
<p>&lt;%= link_to 'Edit', edit_category_path(@category) %&gt; |
&lt;%= link_to 'Back', categories_path %&gt;</p>
<p>&lt;%= render 'shared/footer' %&gt;</pre>**request in browser: http://localhost:8000/categories/1<br>
we get:<br>
<img src="http://img.blog.csdn.net/20150513210658865?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br>
我们再请求一些url如： localhost:8000/categories/2 能得到对应的改变。<br>
<br>
<span style="color:#FF0000">这里我就有个疑问，为何routes.rb文件里没有体现出任何对 url 请求的处理的代码，比如，它怎么区分 /categories 和 /categories/1 这俩请求的</span><br></p>
<p></p>
<h3><br>
2. Forms in html - 表单请求<br>
</h3>
在我们开始下一个method之前，先看看form - 表单。<br>
Forms are used all over the internet to get input from users. Anytime you fill in information online - signing up for a website or buying shoes, you use a form.<br>
&gt;&gt;Rails gives us a way to create forms called <strong><span style="font-family:Courier New"><span style="background-color:rgb(204,204,204)">form_for</span></span></strong> . Let's take a look:<pre code_snippet_id="666275" snippet_file_name="blog_20150518_3_6232820"  code_snippet_id="666275" snippet_file_name="blog_20150518_3_6232820" name="code" class="html"> &lt;%= form_for (@category) do |f| %&gt;  &lt;!--for the person at hand, we&#39;ll pass the following information to our form.--&gt;
   &lt;div class=&quot;field&quot;&gt;  
   &lt;%= f.label :name %&gt;&lt;br&gt;   &lt;!--Heading for name, labels in Rails, allow us to label our field -!--冒号后面不能有空格---&gt;
   &lt;%= f.text_field :name %&gt;  &lt;!--The field where we put our stuff, text_field is for text, --&gt;
   &lt;/div&gt;
<p>&lt;div class=&quot;field&quot;&gt;
&lt;%= f.label :thumburl %&gt;&lt;br&gt;
&lt;%= f.url_field :thumburl %&gt;  &lt;!&ndash;rails we can use url_field for things like urls&ndash;&gt;
&lt;/div&gt;</p>
<p>&lt;div class='actions'&gt;
&lt;%= f.submit %&gt; &lt;!&ndash;the button to submit the form.&ndash;&gt;
&lt;/div&gt;
&lt;% end %&gt;</pre>All this information gets saved in a file called
_form.html.erb[_form.html.erb]!<br></p>
<p><br>
</p>
<p>===================================</p>
<p>好了，我们要接着写 增加 的Controller methods 了。</p>
<p></p>
<h3>3. Add 'new' and 'create' method into Controller</h3>
增加一个条目的method是成对出现的： new&nbsp; &amp; create<br>
the 'new' method look like this:<pre code_snippet_id="666275" snippet_file_name="blog_20150518_4_4017270"  code_snippet_id="666275" snippet_file_name="blog_20150518_4_4017270" name="code" class="ruby">def new
    @category = Category.new  #creating a whole new instance of Category, and storing it in @category
end</pre>但是建立了一个instance of Category还不够，它并没有保存，需要建立'create' method.<br>
<p></p>
<p>The create method looks like this:</p>
<pre code_snippet_id="666275" snippet_file_name="blog_20150518_5_4969914"  code_snippet_id="666275" snippet_file_name="blog_20150518_5_4969914" name="code" class="ruby">def create
 @category = Category.new(category_params)  #save that information as our new data through our strong params method
 if @category.save
  redirect_to(:action =&gt; &#39;index&#39;) #If it saves, we redirect to the index page
 else
  render(&#39;new&#39;) #otherwise the new page will render again.
 end
end
</pre>此时的 *** <span>app/controllers/categories_controller.rb</span> 文件就成了：<pre code_snippet_id="666275" snippet_file_name="blog_20150518_6_8746458"  code_snippet_id="666275" snippet_file_name="blog_20150518_6_8746458" name="code" class="ruby">class CategoriesController &lt; ApplicationController
  def index
    @categories = Category.all
  end
<p>def show
@category = Category.find(params[:id])
end</p>
<p>def new
@category = Category.new
end</p>
<p>def create
@category = Category.new(category_params)  # I do not udrstand the .new and the ()
if @category.save
redirect_to(:action =&gt; 'index')
else
render('new')
end
end</p>
<p>def edit
end</p>
<p>def delete
end</p>
<p>private
def category_params
params.require(:category).permit(:name, :thumburl)
end</p>
<p>end
</pre>在浏览器中请求：localhost:8000/categories/new, 我们得到：<br>
<img src="http://img.blog.csdn.net/20150518172242761?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" height="236" width="339"><br>
<br>
&gt;&gt;&gt; 接着我们就来编辑这个<span> </span><span>app/views/categories/new.html.erb</span> 文件，我们使用引用 _form.html.erb 的方式，直接一句语句引用过来:<br></p>
<p></p>
<pre><code class="lang-erb">&lt;<span class="variable">%=</span> render <span class="string">'form'</span> <span class="variable">%&gt;</span></code></pre>
so,<span>new.html.erb</span> 文件里：<pre code_snippet_id="666275" snippet_file_name="blog_20150518_7_4682593"  code_snippet_id="666275" snippet_file_name="blog_20150518_7_4682593" name="code" class="html">&lt;%= render &#39;shared/topnav&#39; %&gt;
<p>&lt;h1&gt;New Category&lt;/h1&gt;</p>
<p>&lt;!&ndash; Render form here &ndash;&gt;
&lt;%= render 'form' %&gt;</p>
<p>&lt;%= link_to 'Back', categories_path %&gt;</p>
<p>&lt;%= render 'shared/footer' %&gt;</pre></p>
<p>然后我们就得到了这个：<br>
<img src="http://img.blog.csdn.net/20150519110231967?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" height="436" width="456" alt=""><br>
</p>
<p></p>
<p>===================================</p>
<p>好了，我们要接着写 改 的Controller methods 了。</p>
<h3>4. Add 'edit' and 'update' method into Controller</h3>
修改一个条目的method是成对出现的： edit&nbsp; &amp; update<br>
Edit and Update methods are also related. The edit method will give us the ability to edit information and the update method will save the information we edit!<br>
<p>The <strong>edit</strong> method looks like this:</p>
<pre><code class="lang-rb"><span class="function"><span class="keyword">def</span> <span class="title">edit</span></span>
  <span class="variable">@category</span> = <span class="constant">Category</span>.<span class="identifier"><span class="keymethods">find</span></span>(<span class="identifier">params</span>[<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>])
<span class="identifier"><span class="keyword">end</span></span>
</code></pre>
<p><strong><span style="font-family:Courier New">edit method </span></strong>就是根据id找到category并把它存入@category中。跟show method是一模一样的。这还不够，我们还要一个update method来存它。<br>
</p>
<pre><code class="lang-rb"><span class="function"><span class="keyword">def</span> <span class="title"><span class="keymethods">update</span></span></span>
  <span class="variable">@category</span> = <span class="constant">Category</span>.<span class="identifier"><span class="keymethods">find</span></span>(<span class="identifier">params</span>[<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>])  #find a category by its id
  <span class="identifier"><span class="keyword">if</span></span> <span class="variable">@category</span>.<span class="identifier">update_attributes</span>(<span class="identifier">category_params</span>)
    <span class="identifier">redirect_to</span>(<span class="symbol">:<span class="identifier">action</span></span> =&gt; <span class="string">'show'</span>, <span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span> =&gt; <span class="variable">@category</span>.<span class="identifier"><span class="keymethods">id</span></span>)
  <span class="identifier"><span class="keyword">else</span></span>
    <span class="identifier">render</span>(<span class="string">'index'</span>)
  <span class="identifier"><span class="keyword">end</span></span>
<span class="identifier"><span class="keyword">end</span></span>
</code></pre>
所以此时我们的**app/controllers/categories_controller.rb文件就成了：<pre code_snippet_id="666275" snippet_file_name="blog_20150519_8_4585937"  name="code" class="ruby">class CategoriesController &lt; ApplicationController
  def index
    @categories = Category.all
  end
<p>def show
@category = Category.find(params[:id])
end</p>
<p>def new
@category = Category.new
end</p>
<p>def create
@category = Category.new(category_params)
if @category.save
redirect_to(:action =&gt; 'index')
else
render('new')
end
end</p>
<p>def edit
@category = Category.find(params[:id]) #finds a single category of a given id and stores it in @category
end</p>
<p>def update
@category = Category.find(params[:id]) #finds a person by its id and stores it in person
if @category.update_attributes(category_params)#check if the attributes are updated in our model
redirect_to(:action =&gt; 'show', :id =&gt; @category.id)#go to show page for that object
else
render('index') #render our index again
end
end</p>
<p>def delete
end</p>
<p>private<br>
def category_params
params.require(:category).permit(:name, :thumburl)
end</p>
<p>end
</pre><span>In your browser, visit localhost:8000/categories/1/edit to see what you created.</span><br>
<img src="http://img.blog.csdn.net/20150519113231379?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" height="196" width="402" alt=""><br></p>
<p>接下来是修改view: <span>app/views/categories/edit.html.erb</span><br>
We just need an edit page and the update page will process the information.<br>
Here, our form_for comes in handy again. We go to our edit page and write: <code>
&lt;%= render 'form' %&gt;</code><br>
That's it. We're good!<pre code_snippet_id="666275" snippet_file_name="blog_20150519_9_64723"  name="code" class="html">&lt;%= render &#39;shared/topnav&#39; %&gt;
<p>&lt;h1&gt;Edit Category&lt;/h1&gt;</p>
<p>&lt;!&ndash; Render form here &ndash;&gt;
&lt;%= render 'form' %&gt;</p>
<p>&lt;%= link_to 'Back', categories_path %&gt;</p>
<p>&lt;%= render 'shared/footer' %&gt;
</pre>浏览器请求：http://localhost:8000/categories/1/edit<br>
<img src="http://img.blog.csdn.net/20150519113531794?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" height="400" width="416" alt=""><br></p>
</p>
<p></p>
<p>===================================</p>
<p>好了，我们要接着写 删 的Controller methods 了。</p>
<h3>5. Add 'delete' and 'destroy' method into Controller</h3>
delete and destroy method.The delete and destroy methods go together. The delete method will give us the ability delete information, and the destroy method will permanently destroy it! The 'delete' method 是我们可以拿来删除信息的，the 'destroy' method是让我们永久去除它的。
<p>we could write a delete method like this:</p>
<pre><code class="lang-rb"><span class="function"><span class="keyword">def</span> <span class="title"><span class="keymethods">delete</span></span></span>
  <span class="variable">@category</span> = <span class="constant">Category</span>.<span class="identifier"><span class="keymethods">find</span></span>(<span class="identifier">params</span>[<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>])
<span class="identifier"><span class="keyword">end</span></span>
</code></pre>
<p></p>
<p>它看起来有点像show &amp; edit，The destroy method looks like this:</p>
<pre><code class="lang-rb"><span class="function"><span class="keyword">def</span> <span class="title">destroy</span></span>
  <span class="constant">Category</span>.<span class="identifier"><span class="keymethods">find</span></span>(<span class="identifier">params</span>[<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>]).<span class="identifier">destroy </span>
  <span class="identifier">redirect_to</span>(<span class="symbol">:<span class="identifier">action</span></span> =&gt; <span class="string">'index'</span>)
<span class="identifier"><span class="keyword">end</span></span>
</code></pre>
<p></p>
<p>Here we find a category we want to permanently delete. Once we delete it, we get redirected to the index page.</p>
<p>修改view： app/views/categories/delete.html.erb 成：<pre code_snippet_id="666275" snippet_file_name="blog_20150519_10_8641190"  name="code" class="html">&lt;p&gt;
  &lt;strong&gt;Name:&lt;/strong&gt;
  &lt;%= @category.name %&gt;
&lt;/p&gt;
<p>&lt;p&gt;
&lt;strong&gt;Thumburl:&lt;/strong&gt;
&lt;%= image_tag @category.thumburl %&gt;
&lt;/p&gt;</p>
<p>&lt;%= link_to &quot;Delete&quot;, categories_delete_path(:id =&gt; @category.id) %&gt; |
&lt;%= link_to 'Edit', edit_category_path(@category) %&gt; |
&lt;%= link_to 'Back', categories_path %&gt;</p>
<p>&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;3&lt;/p&gt;
</pre><br>
然后浏览器中请求：localhost:8000/categories/1/delete, 得到：<br>
<img src="http://img.blog.csdn.net/20150519140610500?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc29uaWN0bA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" height="402" width="415" alt=""></p></p>
<p><span style="font-size:18px">Congratulations! You created the Categories page of the Etsy app. We did this by creating the Model, Controller, and Views for Categories.</span><br>
</p>
<p>总结一下：</p>
<p></p>
<p>We first generated the Category Model using a terminal command. We added columns to our Categories Migration table and migrated and seeded our database.</p>
<p>We then generated a Categories Controller with the index, show, new, edit, and delete methods. This gave us a route and View for those methods.</p>
<p>We created Controller methods for eight of our CRUD actions, and Views for index, show, new, edit, and delete.<br>
</p>
<ul>
<li>首先在terminal command里建立了Model， 我们在注入表里加入了columns到Categories,并且，我们Seeded our database.<br>
</li><li>然后我们建立了categories controller with the index, show, new, edit, and delete methods. 这让我们有了routes 和 view for those methods.</li><li>我们8个CRUD actions 所需的methods都建立在了controller里，index, show, edit ,and delete所需的Views也建立了。<br>
</li></ul>
<br>
<br>
<code class="lang-rb"><span class="identifier"><span class="keyword"></span></span></code>
<p></p>
<br>
<br>
<br>
<br>
<br>
<br>
<p><br>
</p>



        
      </article>
    </div>

    
      <div class="meta article-card">
    <div class="row">
      <span class="label">



<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M32 456a24 24 0 0024 24h400a24 24 0 0024-24V176H32zm320-244a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm-80-80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm-80-80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm-80-80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zm0 80a4 4 0 014-4h40a4 4 0 014 4v40a4 4 0 01-4 4h-40a4 4 0 01-4-4zM456 64h-55.92V32h-48v32H159.92V32h-48v32H56a23.8 23.8 0 00-24 23.77V144h448V87.77A23.8 23.8 0 00456 64z'/></svg>













Published At</span><time>2015-05-13 12:20 CST</time>
      
    </div>

    

    
      <div class="row social-share">
        <span class="label">















<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M272 176v161h-32V176H92a12 12 0 00-12 12v280a12 12 0 0012 12h328a12 12 0 0012-12V188a12 12 0 00-12-12zM272 92.63l64 64L358.63 134 256 31.37 153.37 134 176 156.63l64-64V176h32V92.63z'/></svg>

Share with</span>
        
        
        <a
          target="_blank"
          title="share to reddit"
          rel="noopener noreferrer"
          aria-label="share Ruby学习笔记5: 动态web app的建立 （2） on reddit"
          href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fp20150513122000%2f&title=Ruby%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b05%3a%20%e5%8a%a8%e6%80%81web%20app%e7%9a%84%e5%bb%ba%e7%ab%8b%20%ef%bc%882%ef%bc%89">
          









<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512' fill="currentColor" stroke="currentColor" stroke-width="10"><path d='M324 256a36 36 0 1036 36 36 36 0 00-36-36z'/><circle cx='188' cy='292' r='36' transform='rotate(-22.5 187.997 291.992)'/><path d='M496 253.77c0-31.19-25.14-56.56-56-56.56a55.72 55.72 0 00-35.61 12.86c-35-23.77-80.78-38.32-129.65-41.27l22-79 66.41 13.2c1.9 26.48 24 47.49 50.65 47.49 28 0 50.78-23 50.78-51.21S441 48 413 48c-19.53 0-36.31 11.19-44.85 28.77l-90-17.89-31.1 109.52-4.63.13c-50.63 2.21-98.34 16.93-134.77 41.53A55.38 55.38 0 0072 197.21c-30.89 0-56 25.37-56 56.56a56.43 56.43 0 0028.11 49.06 98.65 98.65 0 00-.89 13.34c.11 39.74 22.49 77 63 105C146.36 448.77 199.51 464 256 464s109.76-15.23 149.83-42.89c40.53-28 62.85-65.27 62.85-105.06a109.32 109.32 0 00-.84-13.3A56.32 56.32 0 00496 253.77zM414 75a24 24 0 11-24 24 24 24 0 0124-24zM42.72 253.77a29.6 29.6 0 0129.42-29.71 29 29 0 0113.62 3.43c-15.5 14.41-26.93 30.41-34.07 47.68a30.23 30.23 0 01-8.97-21.4zM390.82 399c-35.74 24.59-83.6 38.14-134.77 38.14S157 423.61 121.29 399c-33-22.79-51.24-52.26-51.24-83A78.5 78.5 0 0175 288.72c5.68-15.74 16.16-30.48 31.15-43.79a155.17 155.17 0 0114.76-11.53l.3-.21.24-.17c35.72-24.52 83.52-38 134.61-38s98.9 13.51 134.62 38l.23.17.34.25A156.57 156.57 0 01406 244.92c15 13.32 25.48 28.05 31.16 43.81a85.44 85.44 0 014.31 17.67 77.29 77.29 0 01.6 9.65c-.01 30.72-18.21 60.19-51.25 82.95zm69.6-123.92c-7.13-17.28-18.56-33.29-34.07-47.72A29.09 29.09 0 01440 224a29.59 29.59 0 0129.41 29.71 30.07 30.07 0 01-8.99 21.39z'/><path d='M323.23 362.22c-.25.25-25.56 26.07-67.15 26.27-42-.2-66.28-25.23-67.31-26.27a4.14 4.14 0 00-5.83 0l-13.7 13.47a4.15 4.15 0 000 5.89c3.4 3.4 34.7 34.23 86.78 34.45 51.94-.22 83.38-31.05 86.78-34.45a4.16 4.16 0 000-5.9l-13.71-13.47a4.13 4.13 0 00-5.81 0z'/></svg>








        </a>
        <a
          target="_blank"
          title="share to twitter"
          rel="noopener noreferrer"
          aria-label="share Ruby学习笔记5: 动态web app的建立 （2） on twitter"
          href="https://twitter.com/intent/tweet/?text=Ruby%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b05%3a%20%e5%8a%a8%e6%80%81web%20app%e7%9a%84%e5%bb%ba%e7%ab%8b%20%ef%bc%882%ef%bc%89&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fp20150513122000%2f&amp;hashtags=">
          










<svg class="ionicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="fill:none;" stroke="currentColor" stroke-width="2"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>







        </a>
        <a
          target="_blank"
          title="share to facebook"
          rel="noopener noreferrer"
          aria-label="share Ruby学习笔记5: 动态web app的建立 （2） on facebook"
          href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fp20150513122000%2f">
          








<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 24 24" style="fill:none;" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>









        </a>
      </div>
    

    
</div>

    

    

  </div>
</main>

  </main>
  <footer>
    <footer id="footer">
  <div class="container has-padding is-flex">
    <ul class="links">
      
      <li>
        </li>
      <li>
        <a
          rel="nofollow"
          target="_blank"
          href="https://github.com/wayjam/hugo-theme-fluency"
          title="using Hugo theme fluency">
          Theme Fluency
        </a>
      </li>
      <li>
        <a rel="nofollow" target="_blank" href="https://gohugo.io" title="Built with hugo">Built with Hugo</a>
      </li>
    </ul>
    <div class="copyright">
       &copy; 2025 Combine Art and Sciences
      
    </div>
  </div>
</footer>

<script>
    window.FluencyCopyIcon = '\n\n\n\n\n\n\n\u003csvg xmlns=\u0027http:\/\/www.w3.org\/2000\/svg\u0027 class=\u0027ionicon\u0027 viewBox=\u00270 0 512 512\u0027\u003e\u003crect x=\u0027128\u0027 y=\u0027128\u0027 width=\u0027336\u0027 height=\u0027336\u0027 rx=\u002757\u0027 ry=\u002757\u0027 stroke-linejoin=\u0027round\u0027 class=\u0027ionicon-fill-none ionicon-stroke-width\u0027\/\u003e\u003cpath d=\u0027M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24\u0027 stroke-linecap=\u0027round\u0027 stroke-linejoin=\u0027round\u0027 class=\u0027ionicon-fill-none ionicon-stroke-width\u0027\/\u003e\u003c\/svg\u003e\n\n\n\n\n\n\n\n\n\n\n'
</script>


<script defer src="http://localhost:1313/js/main.min.15ea6de828b83519cdc1bc66872563a50cd5e59b4b1cfc6f31019951922b2e78.js" integrity="sha256-Fept6Ci4NRnNwbxmhyVjpQzV5ZtLHPxvMQGZUZIrLng=" crossorigin="anonymous" async></script>


    <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
  integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
  crossorigin="anonymous"
/>


<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
  integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4"
  crossorigin="anonymous"
></script>


<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
  integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"
  crossorigin="anonymous"
  onload="renderMathInElement(document.body);"
></script>



<noscript>
<style type=text/css>#theme-selector-button{display:none}</style>
</noscript>




  </footer>
</body>
</html>